- pipeline: deploy-production
  name: Deploy Production
  refs:
  - refs/heads/main
  events:
  - type: PUSH
  fail_on_prepare_env_warning: true
  resources: NANO
  targets:
  - target: ftp-phyonext
    type: FTP
    secure: true
    name: FTP Phyonext
    host: 46.202.145.8
    auth:
      username: u598903905
      password: '!encrypted WxC9o49iW3rgolm202J2Kzl5zG1EPt3hAJJ9CG2yVA0=.MSMWN1SaMx6PQ/xpKJE5lg=='
    path: /domains/phyonex.com/public_html/material
    permissions:
      others: USE_ONLY
      users:
        brunopelatieri@gmail.com: MANAGE
  actions:
  - action: Transfer files
    type: TRANSFER
    local_path: /
    targets:
    - ftp-phyonext
  - action: Send notification to Telegram Channel
    type: TELEGRAM
    content: "[#$BUDDY_RUN_ID] $BUDDY_PIPELINE_NAME run by [$BUDDY_TRIGGERING_ACTOR]($BUDDY_TRIGGERING_ACTOR_URL)"
    integration: my-telegram
